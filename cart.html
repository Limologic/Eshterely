<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Eshterely.com | Cart page</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
        <link rel="stylesheet" href="cart.css" media="screen" title="no title" charset="utf-8">
        <link rel="stylesheet" href="css/font-awesome.css">
        <link rel="stylesheet" href="eshterely.css">
    </head>


    <body class="container">
      <div id="getheader">

      </div>

      <div>
        <table class="table table-striped">
          <tr>
          <td>ITEM</td>
          <td>QUANTITY</td>
          <td>SUBTOTAL</td>
          </tr>
          <tr>
              <td>Mobile</td>
              <td>1</td>
              <td>1850L.E</td>
          </tr>
          <tr>
              <td>Music</td>
              <td>6</td>
              <td>200L.E</td>
          </tr>
          <tr>
              <td>Books</td>
              <td>5</td>
              <td>250L.E</td>
          </tr>
          <tr>
              <td>LapTop</td>
              <td>1</td>
              <td>4500L.E</td>
          </tr>
        </table>

      <button type="button" class="btn btn-primary btn-lg">checkout </button>

      <div id="getfooter">

      </div>

      <!-- footer -->
      <!-- jQuery for drop down in Nav bar to work (categories)-->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
      <script src="my-html-loader.js"></script>
      <script>
        var userCart = [];
        var cartItemsCount=0;
        var getCartCount = function(){
          userCart = JSON.parse(localStorage.getItem('my-cart'));
          cartItemsCount = JSON.parse(localStorage.getItem('cartCount'));
          if(cartItemsCount===null){
            userCart = [];
            cartItemsCount=0;
            localStorage.setItem('my-cart', JSON.stringify(userCart));
            localStorage.setItem('cartCount', 0);
          }
          console.log("CART COUNT",cartItemsCount);
          $('.badge').html(cartItemsCount);
        }
        loader("navheader.html", "#getheader", getCartCount);
        loader("ourfooter.html", "#getfooter")
      </script>
      <script>
        // $('.badge').html(JSON.parse(localStorage.getItem('cartCount')));

          // Handle Add to cart button click function
          $('.cart-btn').click(function(e) {
              //console.log($(e.target).parent()[0].offsetParent.id);
              userCart.push($(e.target).parent()[0].offsetParent.id)
              cartItemsCount++;
              localStorage.setItem('my-cart', JSON.stringify(userCart));
              localStorage.setItem('cartCount', JSON.stringify(cartItemsCount));
              $('.badge').html(JSON.parse(localStorage.getItem('cartCount')));
              //JSON.parse(localStorage.getItem('cartItemsCount'))
          });
      </script>


    </body>

</html>
