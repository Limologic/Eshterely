<!DOCTYPE html>
<html>
  <head>
    <title>Eshterely.com: Your Shopping Zone!</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="eshterely.css">
    <link rel="stylesheet" href="css/font-awesome.css">
  </head>
  <body class="container">
    <div id="getheader">

    </div>

    <!-- MAIN CONTENT CONTAINER -->
    <content class="row">
      <!-- Catgeories menu left panel -->
      <div class="col-md-1">
        <!-- <h4>Categories</h4> -->
        <div id="categs-panel" class="list-group">
          <a id="all-cat" href="#" class="list-group-item active">All</a>
          <a id="books-cat" href="#" class="list-group-item">Books</a>
          <a id="music-cat" href="#" class="list-group-item">Music</a>
          <a id="movies-cat" href="#" class="list-group-item">Movies</a>
          <a id="games-cat" href="#" class="list-group-item">Games</a>
        </div>
      </div>

      <!-- Categories content -->
      <div class="col-md-11">
      <!-- Row 1 BOOKS -->
      <div class="row">
        <div id="bookslist">
          <h3>Books</h3>
          <!-- This section will be filled dynamically by the script with list of books in products.js -->
        </div>
      </div>
      <!-- Row 2 MUSIC-->
      <div class="row">
        <div id="musiclist">
          <h3>Music</h3>
          <!-- This section will be filled dynamically by the script with list of music albums in products.js -->
        </div>
      </div>
      <!-- Row 3 GAMES-->
      <div class="row">
        <div id="gameslist">
          <h3>Games</h3>
          <!-- This section will be filled dynamically by the script with list of games in products.js -->
        </div>
      </div>
    </content>



  <!-- footer -->
    <!-- <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet"> -->

    <div id="getfooter"></div>


    <!-- jQuery for drop down in Nav bar to work (categories)-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.1.js"></script>
    <script src="my-html-loader.js"></script>
    <script src="products.js"></script>
    <script src="underscore.js"></script>
    <script>
      loader("navheader.html","#getheader")
      loader("ourfooter.html","#getfooter")
    </script>
    <script>
      var displayProd = function(prods, htmltag, categ){
        //Return only the same category as passed to this function 'categ'
        var prod = _.filter(prods, function(checkprod){
          if(checkprod.category===categ) return checkprod;
        });
        console.log(prod);
        var panelHeadStyle = "panel-default";
        if(categ==="books")
          panelHeadStyle = "panel-success";
        else if(categ==="music")
          panelHeadStyle = "panel-info";
        else if(categ==="games")
          panelHeadStyle = "panel-warning";

        for(var i=0;i<prod.length;i++)
        {
          var myString = "";
          myString += '<div id="'+prod[i].id+'" class="panel '+panelHeadStyle+' col-md-4">';
          myString += '  <div class="panel-heading name '+categ+'">'+prod[i].name+'</div>';
          myString += '  <div class="panel-body">';
          myString += '    <div class="row">';
          myString += '      <div class="col-md-6">';
          myString += '        <a href="details.html"><img class="content-img" src="'+prod[i].picture_url+'" alt="" /></a>';
          myString += '      </div>';
          myString += '      <div class="col-md-6">'
          myString += '        <div class="desc small">'+prod[i].description+'</div>';
          myString += '      </div>';
          myString += '    </div>';
          myString += '  </div>';
          myString += '  <div class="panel-footer container-fluid">';
          myString += '    <div class="col-md-3">';
          myString += '      <div class="category">'+prod[i].category+'</div>';
          myString += '    </div>';
          myString += '    <div class="col-md-3">';
          myString += '      <div class="price">'+prod[i].price+'</div>';
          myString += '    </div>';
          myString += '    <div class="col-md-3">';
          myString += '      <a role="button" class="btn btn-primary btn-xs" href="cart.html">Add to cart</a>';
          myString += '    </div>';
          myString += '    <div class="col-md-3">';
          myString += '      <a class="btn btn-success btn-xs" href="details.html">Read more</a>';
          myString += '    </div>';
          myString += '  </div>';
          myString += '</div>';

          $(htmltag).append(myString);
        }
      }
      displayProd(products, '#bookslist', 'books');
      displayProd(products, '#musiclist', 'music');
      displayProd(products, '#gameslist', 'games');

      var hideall = function(){
        $('#bookslist').hide();
        $('#musiclist').hide();
        $('#gameslist').hide();
        $('#movieslist').hide();

        $('#all-cat').removeClass("active");
        $('#books-cat').removeClass("active");
        $('#music-cat').removeClass("active");
        $('#games-cat').removeClass("active");
        $('#movies-cat').removeClass("active");
      }
      $('#books-cat').click(function(){
        hideall();
        $('#bookslist').show();
        $('#books-cat').addClass("active");
      });
      $('#music-cat').click(function(){
        hideall();
        $('#musiclist').show();
        $('#music-cat').addClass("active");
      });
      $('#games-cat').click(function(){
        hideall();
        $('#gameslist').show();
        $('#games-cat').addClass("active");
      });
      $('#movies-cat').click(function(){
        hideall();
        $('#movieslist').show();
        $('#movies-cat').addClass("active");
      });
      $('#all-cat').click(function(){
        hideall();
        $('#bookslist').show();
        $('#musiclist').show();
        $('#gameslist').show();
        $('#movieslist').show();

        $('#all-cat').addClass("active");
      });
    </script>

  </body>
</html>
